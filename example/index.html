<!DOCTYPE html>
<html>
	<head>
		<title>上传图片</title>
	</head>
	<body>
		<button id="btn_upload">upload</button>
		<div id="preview"></div>
		<div style="border:3px solid #ccc;height:1000px;"></div>
		<script src="../src/jquery-1.11.2.js"></script>
		<script src="../src/mobile-upload.js"></script>
		<script src="../src/upload.js"></script>
		<script>
		var upload = new Upload();
		var loadArr = {};
		upload.init({target:$('#btn_upload'),url:"data.html",accept:"png,jpg",startUpload:function(input,i){
			console.log('正在上传中....')
			loadArr[i] = $('<span>正在上传中....</span>');
			$('#preview').append(loadArr[i]);
		}, callback:function(result,i){
			eval( 'result='+result);
			setTimeout(function(){
				//看到正在上传中的效果加了定时器，实际应用中不需要
				loadArr[i] .html('<img src="'+result.url+'" width="200" height="200"/><input type="hidden" value="'+result.url+'"/>');
			},1000)
		}});
		</script>
	</body>
</html>